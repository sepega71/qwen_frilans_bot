# Телеграм-бот для фрилансеров

## Содержание

1. [Общее описание](#общее-описание)
2. [Установка и настройка](#установка-и-настройка)
3. [Конфигурация](#конфигурация)
4. [Запуск бота](#запуск-бота)
5. [Использование и команды](#использование-и-команды)
6. [Источники данных](#источники-данных)
7. [Фильтрация и персонализация](#фильтрация-и-персонализация)
8. [Устранение неполадок](#устранение-неполадок)

## Общее описание

Телеграм-бот для фрилансеров — это автоматизированная система, которая собирает, фильтрует и персонализированно рассылает актуальные заказы и вакансии из различных источников. Система использует только бесплатные, открытые и легальные источники, доступные в России.

### Основные возможности:
- Автоматический сбор заказов и вакансий из различных источников
- Персонализированная фильтрация по ключевым критериям
- Уведомления в Telegram о новых совпадениях
- Поддержка различных параметров фильтрации (ключевые слова, технологии, бюджет, регион и др.)

### Архитектура системы:
- **Телеграм-бот** — взаимодействует с пользователями через Telegram API
- **Модуль сбора данных** — сканирует различные источники (API, веб-сайты, телеграм-каналы)
- **Модуль фильтрации** — применяет пользовательские фильтры к собранным данным
- **Модуль персонализации** — управляет профилями пользователей и их предпочтениями
- **Модуль уведомлений** — отправляет персонализированные уведомления пользователям
- **Слой хранения данных** — хранит профили пользователей и собранные заказы/вакансии
- **Модуль управления** — мониторит состояние системы, обеспечивает логирование и аудит

## Установка и настройка

### Системные требования
- Python 3.8 или выше
- pip (менеджер пакетов Python)
- Git (для клонирования репозитория)
- Telegram Bot Token (получается у @BotFather в Telegram)

### Установка

1. Клонирование репозитория:

Если вы уже создали репозиторий на GitHub (например, как в вашем случае - `qwen_frilans_bot`), и хотите добавить туда проект, выполните следующие шаги:

1. Создайте новую папку на вашем компьютере, например, `qwen_frilans_bot`
2. Откройте командную строку (в Windows - cmd или PowerShell, в macOS/Linux - Terminal)
3. Перейдите в созданную папку:
   ```bash
   cd qwen_frilans_bot
   ```
4. Инициализируйте Git в этой папке:
   ```bash
   git init
   ```
5. Свяжите локальный репозиторий с удалённым на GitHub:
   ```bash
   git remote add origin https://github.com/sepega71/qwen_frilans_bot.git
   ```
6. Скачайте файлы проекта в эту папку (скопируйте все файлы, созданные в рамках проекта)
7. Добавьте все файлы к отслеживанию:
   ```bash
   git add .
   ```
8. Сделайте коммит:
   ```bash
   git commit -m "Initial commit: Telegram bot for freelance job monitoring"
   ```
9. Отправьте файлы в репозиторий:
   ```bash
   git push -u origin main
   ```

Если вы хотите просто скачать уже готовый проект с GitHub, используйте команду:
```bash
git clone https://github.com/sepega71/qwen_frilans_bot.git
cd qwen_frilans_bot
```

2. Создание виртуального окружения:
```bash
python -m venv venv
source venv/bin/activate  # На Linux/Mac
# или
venv\Scripts\activate  # На Windows
```

3. Установка зависимостей:
```bash
pip install -r requirements.txt
```

Если файл `requirements.txt` отсутствует, установите следующие пакеты:
```bash
pip install python-telegram-bot aiohttp requests beautifulsoup4 telethon
```

## Конфигурация

### 1. Получение Telegram Bot Token

1. Откройте Telegram и найдите @BotFather
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания нового бота
4. Скопируйте предоставленный токен

### 2. Настройка Telegram API (для мониторинга Telegram-каналов)

Если вы хотите использовать функциональность мониторинга Telegram-каналов:

1. Перейдите на https://my.telegram.org
2. Войдите в систему с вашим номером телефона
3. Создайте новое приложение
4. Запишите `api_id` и `api_hash`

### 3. Создание конфигурационного файла

Создайте файл `config.py` в корне проекта:

```python
# config.py
TELEGRAM_BOT_TOKEN = "ВАШ_TELEGRAM_BOT_TOKEN"
TELEGRAM_API_ID = "ВАШ_API_ID"  # Необязательно
TELEGRAM_API_HASH = "ВАШ_API_HASH"  # Необязательно
TELEGRAM_PHONE = "ВАШ_НОМЕР_ТЕЛЕФОНА"  # Необязательно, формат: "+71234567890"

# Настройки базы данных
DATABASE_PATH = "frilans_bot.db"

# Настройки логирования
LOG_LEVEL = "INFO"
LOG_FILE = "frilans_bot.log"
```

## Запуск бота

### 1. Запуск в режиме разработки

```bash
python bot_core.py
```

### 2. Запуск с использованием скрипта запуска

Создайте скрипт запуска `run_bot.py`:

```python
# run_bot.py
import asyncio
from bot_core import setup_bot_application
from config import TELEGRAM_BOT_TOKEN, TELEGRAM_API_ID, TELEGRAM_API_HASH, TELEGRAM_PHONE

async def main():
    # Инициализация бота с учетными данными
    bot = setup_bot_application(
        token=TELEGRAM_BOT_TOKEN,
        telegram_api_id=TELEGRAM_API_ID if 'TELEGRAM_API_ID' in globals() else None,
        telegram_api_hash=TELEGRAM_API_HASH if 'TELEGRAM_API_HASH' in globals() else None,
        telegram_phone=TELEGRAM_PHONE if 'TELEGRAM_PHONE' in globals() else None
    )
    
    # Запуск бота
    bot.run()

if __name__ == "__main__":
    asyncio.run(main())
```

Затем запустите:

```bash
python run_bot.py
```

## Использование и команды

### Команды бота

- `/start` — начать работу с ботом
- `/help` — справка по использованию
- `/settings` — настройка профиля и предпочтений
- `/filter` — настройка фильтров поиска
- `/subscribe` — подписаться на рассылку
- `/unsubscribe` — отписаться от рассылки
- `/add_keywords` — добавить ключевые слова
- `/remove_keywords` — удалить ключевые слова
- `/add_tech` — добавить технологии
- `/remove_tech` — удалить технологии
- `/set_budget` — установить бюджет
- `/set_region` — установить регион
- `/set_project_type` — установить тип проекта
- `/set_experience` — установить уровень опыта
- `/set_payment_type` — установить форму оплаты

### Примеры использования

#### Настройка фильтров

1. Добавление ключевых слов:
```
/add_keywords python, telegram, bot
```

2. Установка бюджета:
```
/set_budget 10000 50000
```

3. Установка региона:
```
/set_region Москва, Санкт-Петербург
```

#### Подписка на рассылку

1. Настройте фильтры
2. Используйте команду `/subscribe`

## Источники данных

Система собирает данные из следующих источников:

- fl.ru — через RSS и веб-скрапинг
- weblancer.net — через RSS и веб-скрапинг
- freemarket.ru — через веб-скрапинг
- GitHub API — для open-source проектов
- Telegram-каналы — через Telegram API
- Другие доступные легальные API и веб-сайты в РФ

Каждый источник данных имеет свой собственный модуль сбора, который обеспечивает нормализацию данных к единому формату.

## Фильтрация и персонализация

Система поддерживает сложные фильтры, включая:

- Ключевые слова
- Стек технологий
- Бюджет (минимальный/максимальный)
- Регион выполнения
- Тип проекта (заказ или вакансия)
- Уровень опыта
- Форма оплаты
- Сложные ключевые слова с логическими операторами (И, ИЛИ, НЕ)

После применения фильтров система персонализирует уведомления для каждого пользователя, учитывая его предпочтения и настройки.

## Устранение неполадок

### Ошибка при запуске: "ModuleNotFoundError"

Убедитесь, что все зависимости установлены:

```bash
pip install -r requirements.txt
```

### Бот не отвечает

Проверьте, что токен бота указан правильно и бот активен.

### Ошибка при доступе к Telegram API

Убедитесь, что `api_id` и `api_hash` указаны правильно, и номер телефона подтвержден.

### Проблемы с доступом к источникам данных

Некоторые веб-сайты могут блокировать автоматические запросы. В таких случаях система автоматически переключается на альтернативные источники данных или методы получения информации.